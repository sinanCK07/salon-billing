[{"filePath":"C:\\Users\\msck2\\Desktop\\sensor billing\\src\\App.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\msck2\\Desktop\\sensor billing\\src\\components\\AppLayout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\msck2\\Desktop\\sensor billing\\src\\components\\BillPreview.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\msck2\\Desktop\\sensor billing\\src\\components\\BillingForm.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'setBillDate' is assigned a value but never used.","line":16,"column":22,"nodeType":null,"messageId":"unusedVar","endLine":16,"endColumn":33},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'setBillTime' is assigned a value but never used.","line":17,"column":22,"nodeType":null,"messageId":"unusedVar","endLine":17,"endColumn":33}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useMemo } from 'react';\r\nimport { useSalonSettings } from '../context/SalonSettingsContext';\r\nimport { useBillHistory } from '../context/BillHistoryContext';\r\nimport type { Bill, ServiceItem } from '../context/BillHistoryContext';\r\nimport { Plus, Trash2, ArrowRight } from 'lucide-react';\r\nimport { BillPreview } from './BillPreview';\r\n\r\nexport const BillingForm: React.FC = () => {\r\n    const { settings } = useSalonSettings();\r\n    const { addBill } = useBillHistory();\r\n    const [generatedBill, setGeneratedBill] = useState<Bill | null>(null);\r\n\r\n    // Customer State\r\n    const [customerName, setCustomerName] = useState('');\r\n    const [customerPhone, setCustomerPhone] = useState('');\r\n    const [billDate, setBillDate] = useState(new Date().toISOString().split('T')[0]);\r\n    const [billTime, setBillTime] = useState(new Date().toTimeString().slice(0, 5));\r\n\r\n    // Services State\r\n    const [services, setServices] = useState<ServiceItem[]>([\r\n        { id: '1', name: '', price: 0, quantity: 1 }\r\n    ]);\r\n    const [discount, setDiscount] = useState(0);\r\n    const [discountReason, setDiscountReason] = useState('');\r\n\r\n    // Computed Totals\r\n    const subtotal = useMemo(() => {\r\n        return services.reduce((sum, item) => sum + (item.price * item.quantity), 0);\r\n    }, [services]);\r\n\r\n    const taxAmount = useMemo(() => {\r\n        return settings.enableTax ? (subtotal * settings.taxRate) / 100 : 0;\r\n    }, [subtotal, settings]);\r\n\r\n    const grandTotal = useMemo(() => {\r\n        return Math.max(0, subtotal + taxAmount - discount);\r\n    }, [subtotal, taxAmount, discount]);\r\n\r\n    // Refs for auto-focus\r\n    const serviceNameRefs = React.useRef<{ [key: string]: HTMLInputElement | null }>({});\r\n\r\n    // Handlers\r\n    const handleServiceChange = (id: string, field: keyof ServiceItem, value: string | number) => {\r\n        setServices(prev => {\r\n            const index = prev.findIndex(s => s.id === id);\r\n            const updated = prev.map(s => {\r\n                if (s.id !== id) return s;\r\n\r\n                const updatedService = { ...s, [field]: value };\r\n\r\n                // Auto-fill price if name matches a predefined service\r\n                if (field === 'name') {\r\n                    const matchedService = settings.predefinedServices?.find(ps => ps.name === value);\r\n                    if (matchedService) {\r\n                        updatedService.price = matchedService.price;\r\n                    }\r\n                }\r\n\r\n                return updatedService;\r\n            });\r\n\r\n            // Fast Billing Logic: If this is the last row and name is selected, \r\n            // or if Price/Qty is entered, and we want to auto-open next row.\r\n            const currentItem = updated[index];\r\n            const isLast = index === updated.length - 1;\r\n\r\n            if (isLast && (field === 'name' && currentItem.name.length > 2)) {\r\n                // We add a row automatically\r\n                const nextId = Date.now().toString();\r\n                setTimeout(() => {\r\n                    const nextInput = serviceNameRefs.current[nextId];\r\n                    if (nextInput) nextInput.focus();\r\n                }, 10);\r\n                return [...updated, { id: nextId, name: '', price: 0, quantity: 1 }];\r\n            }\r\n\r\n            return updated;\r\n        });\r\n    };\r\n\r\n    const addServiceRow = () => {\r\n        setServices(prev => [\r\n            ...prev,\r\n            { id: Date.now().toString(), name: '', price: 0, quantity: 1 }\r\n        ]);\r\n    };\r\n\r\n    const removeServiceRow = (id: string) => {\r\n        if (services.length > 1) {\r\n            setServices(prev => prev.filter(s => s.id !== id));\r\n        }\r\n    };\r\n\r\n    const handleSubmit = (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n\r\n        if (!customerName) {\r\n            alert(\"Please enter customer name\");\r\n            return;\r\n        }\r\n\r\n        const billNumber = `BILL-${Math.floor(Math.random() * 100000).toString().padStart(6, '0')}`;\r\n\r\n        const newBill: Bill = {\r\n            id: Date.now().toString(),\r\n            billNumber,\r\n            customerName,\r\n            customerWhatsApp: customerPhone,\r\n            date: `${billDate}T${billTime}:00`,\r\n            services: services.filter(s => s.name.trim() !== ''), // Filter  empty rows\r\n            subtotal,\r\n            taxAmount,\r\n            discount,\r\n            discountReason: discount > 0 ? discountReason : '',\r\n            grandTotal\r\n        };\r\n\r\n        if (newBill.services.length === 0) {\r\n            alert(\"Please add at least one service\");\r\n            return;\r\n        }\r\n\r\n        addBill(newBill);\r\n        setGeneratedBill(newBill);\r\n\r\n        // Auto Print if in Electron\r\n        if (window.electron) {\r\n            window.electron.printBill({\r\n                salonName: settings.salonName,\r\n                address: settings.address,\r\n                gstNumber: settings.gstNumber,\r\n                billNumber: newBill.billNumber,\r\n                date: new Date(newBill.date).toLocaleString(),\r\n                items: newBill.services.map(s => ({\r\n                    name: s.name,\r\n                    qty: s.quantity,\r\n                    total: s.price * s.quantity\r\n                })),\r\n                subtotal: newBill.subtotal.toFixed(2),\r\n                tax: newBill.taxAmount.toFixed(2),\r\n                discount: newBill.discount.toFixed(2),\r\n                grandTotal: newBill.grandTotal.toFixed(2)\r\n            }).catch(err => {\r\n                alert(\"Printer Error: \" + err);\r\n            });\r\n        }\r\n    };\r\n\r\n    const handleReset = () => {\r\n        setCustomerName('');\r\n        setCustomerPhone('');\r\n        setServices([{ id: Date.now().toString(), name: '', price: 0, quantity: 1 }]);\r\n        setDiscount(0);\r\n        setDiscountReason('');\r\n        setGeneratedBill(null);\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <div className=\"space-y-6 pb-24\">\r\n                <h2 className=\"text-xl font-bold text-gray-800\">New Bill</h2>\r\n\r\n                <form onSubmit={handleSubmit} className=\"space-y-6\">\r\n                    {/* Date and Time (Read-only) */}\r\n                    <div className=\"flex gap-4 items-center bg-gray-50 p-3 rounded-lg border border-gray-100\">\r\n                        <div className=\"flex-1\">\r\n                            <label className=\"block text-[10px] uppercase font-bold text-gray-400 mb-1 ml-1\">Bill Date</label>\r\n                            <input\r\n                                type=\"date\"\r\n                                readOnly\r\n                                className=\"w-full px-4 py-2 border rounded-lg bg-white text-gray-500 cursor-not-allowed focus:outline-none text-sm\"\r\n                                value={billDate}\r\n                            />\r\n                        </div>\r\n                        <div className=\"w-32\">\r\n                            <label className=\"block text-[10px] uppercase font-bold text-gray-400 mb-1 ml-1\">Bill Time</label>\r\n                            <input\r\n                                type=\"time\"\r\n                                readOnly\r\n                                className=\"w-full px-4 py-2 border rounded-lg bg-white text-gray-500 cursor-not-allowed focus:outline-none text-sm\"\r\n                                value={billTime}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Customer Details */}\r\n                    <div className=\"bg-white p-4 rounded-lg shadow-sm space-y-3\">\r\n                        <h3 className=\"font-semibold text-gray-700\">Customer Details</h3>\r\n                        <div className=\"grid grid-cols-1 gap-3\">\r\n                            <input\r\n                                type=\"text\"\r\n                                placeholder=\"Customer Name\"\r\n                                className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500\"\r\n                                value={customerName}\r\n                                onChange={e => setCustomerName(e.target.value)}\r\n                            />\r\n                            <input\r\n                                type=\"tel\"\r\n                                placeholder=\"WhatsApp Number\"\r\n                                className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500\"\r\n                                value={customerPhone}\r\n                                onChange={e => setCustomerPhone(e.target.value)}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Services */}\r\n                    <div className=\"bg-white p-4 rounded-lg shadow-sm space-y-4\">\r\n                        <h3 className=\"font-semibold text-gray-700\">Services</h3>\r\n                        {services.map((service) => (\r\n                            <div key={service.id} className=\"flex gap-2 items-center\">\r\n                                <div className=\"flex-1 space-y-2\">\r\n                                    <input\r\n                                        ref={el => { serviceNameRefs.current[service.id] = el; }}\r\n                                        type=\"text\"\r\n                                        list={`services-${service.id}`}\r\n                                        placeholder=\"Service Name\"\r\n                                        className=\"w-full px-3 py-2 border rounded-lg text-sm\"\r\n                                        value={service.name}\r\n                                        onChange={e => handleServiceChange(service.id, 'name', e.target.value)}\r\n                                    />\r\n                                    <datalist id={`services-${service.id}`}>\r\n                                        {settings.predefinedServices?.map(ps => (\r\n                                            <option key={ps.id} value={ps.name} />\r\n                                        ))}\r\n                                    </datalist>\r\n                                    <div className=\"flex gap-2\">\r\n                                        <div className=\"relative flex-1\">\r\n                                            <span className=\"absolute left-3 top-2 text-gray-500 text-sm\">{settings.currencySymbol}</span>\r\n                                            <input\r\n                                                type=\"number\"\r\n                                                placeholder=\"Price\"\r\n                                                className=\"w-full pl-7 pr-3 py-2 border rounded-lg text-sm\"\r\n                                                value={service.price || ''}\r\n                                                onChange={e => handleServiceChange(service.id, 'price', parseFloat(e.target.value) || 0)}\r\n                                            />\r\n                                        </div>\r\n                                        <input\r\n                                            type=\"number\"\r\n                                            placeholder=\"Qty\"\r\n                                            className=\"w-16 px-2 py-2 border rounded-lg text-sm text-center\"\r\n                                            value={service.quantity}\r\n                                            onChange={e => handleServiceChange(service.id, 'quantity', parseFloat(e.target.value) || 1)}\r\n                                        />\r\n                                    </div>\r\n                                </div>\r\n\r\n                                {services.length > 1 && (\r\n                                    <button\r\n                                        type=\"button\"\r\n                                        onClick={() => removeServiceRow(service.id)}\r\n                                        className=\"text-red-500 p-2 hover:bg-red-50 rounded-full\"\r\n                                    >\r\n                                        <Trash2 size={18} />\r\n                                    </button>\r\n                                )}\r\n                            </div>\r\n                        ))}\r\n\r\n                        <button\r\n                            type=\"button\"\r\n                            onClick={addServiceRow}\r\n                            className=\"w-full py-2 border-2 border-dashed border-gray-300 rounded-lg text-gray-500 hover:border-purple-500 hover:text-purple-600 font-medium flex items-center justify-center gap-2 transition-colors\"\r\n                        >\r\n                            <Plus size={18} /> Add Service\r\n                        </button>\r\n                    </div>\r\n\r\n                    {/* Totals */}\r\n                    <div className=\"bg-white p-4 rounded-lg shadow-sm space-y-3\">\r\n                        <div className=\"flex justify-between text-gray-600 text-sm\">\r\n                            <span>Subtotal</span>\r\n                            <span>{settings.currencySymbol}{subtotal.toFixed(2)}</span>\r\n                        </div>\r\n                        {settings.enableTax && (\r\n                            <div className=\"flex justify-between text-gray-600 text-sm\">\r\n                                <span>Tax ({settings.taxRate}%)</span>\r\n                                <span>{settings.currencySymbol}{taxAmount.toFixed(2)}</span>\r\n                            </div>\r\n                        )}\r\n                        <div className=\"flex justify-between items-center text-sm\">\r\n                            <span className=\"text-gray-600\">Discount</span>\r\n                            <div className=\"relative w-24\">\r\n                                <span className=\"absolute left-2 top-1.5 text-gray-500\">{settings.currencySymbol}</span>\r\n                                <input\r\n                                    type=\"number\"\r\n                                    className=\"w-full pl-6 pr-2 py-1 border rounded text-right\"\r\n                                    value={discount}\r\n                                    onChange={e => setDiscount(parseFloat(e.target.value) || 0)}\r\n                                />\r\n                            </div>\r\n                        </div>\r\n\r\n                        {discount > 0 && (\r\n                            <div className=\"flex flex-col space-y-2 border-t pt-2\">\r\n                                <label className=\"text-xs font-semibold text-purple-600\">Discount Reason (Internal only)</label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    placeholder=\"e.g. Regular customer, Festival offer\"\r\n                                    className=\"w-full px-3 py-2 border rounded-lg text-sm bg-purple-50 focus:outline-none focus:ring-1 focus:ring-purple-400\"\r\n                                    value={discountReason}\r\n                                    onChange={e => setDiscountReason(e.target.value)}\r\n                                />\r\n                            </div>\r\n                        )}\r\n\r\n                        <div className=\"flex justify-between text-lg font-bold text-gray-800 border-t pt-2\">\r\n                            <span>Total</span>\r\n                            <span>{settings.currencySymbol}{grandTotal.toFixed(2)}</span>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <button\r\n                        type=\"submit\"\r\n                        className=\"w-full bg-purple-600 text-white py-4 rounded-xl font-bold text-lg hover:bg-purple-700 shadow-lg shadow-purple-200 transition-all flex items-center justify-center gap-2\"\r\n                    >\r\n                        <span>Generate Bill</span>\r\n                        <ArrowRight size={20} />\r\n                    </button>\r\n                </form>\r\n            </div>\r\n\r\n            {generatedBill && (\r\n                <BillPreview\r\n                    bill={generatedBill}\r\n                    settings={settings}\r\n                    onClose={handleReset}\r\n                />\r\n            )}\r\n        </>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\msck2\\Desktop\\sensor billing\\src\\components\\Dashboard.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Receipt' is defined but never used.","line":5,"column":22,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":29},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":103,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":103,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5029,5032],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5029,5032],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { useBillHistory } from '../context/BillHistoryContext';\r\nimport { useSalonSettings } from '../context/SalonSettingsContext';\r\nimport { AreaChart, Area, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer } from 'recharts';\r\nimport { TrendingUp, Receipt } from 'lucide-react';\r\n\r\nexport const Dashboard: React.FC = () => {\r\n    const { bills } = useBillHistory();\r\n    const { settings } = useSalonSettings();\r\n\r\n    // Calculate Today's Stats\r\n    const now = new Date();\r\n    const todayStr = now.toISOString().split('T')[0];\r\n    const currentMonth = now.getMonth();\r\n    const currentYear = now.getFullYear();\r\n\r\n    const todayBills = bills.filter(b => b.date.startsWith(todayStr));\r\n    const todayRevenue = todayBills.reduce((sum, b) => sum + b.grandTotal, 0);\r\n\r\n    // Monthly Data Aggregation\r\n    const monthlyBills = bills.filter(b => {\r\n        const d = new Date(b.date);\r\n        return d.getMonth() === currentMonth && d.getFullYear() === currentYear;\r\n    });\r\n\r\n    const monthlyDataMap: { [key: string]: { total: number, count: number } } = {};\r\n\r\n    // Fill all days of the month with zero initially\r\n    const daysInMonth = new Date(currentYear, currentMonth + 1, 0).getDate();\r\n    for (let i = 1; i <= daysInMonth; i++) {\r\n        const dayKey = `${currentYear}-${String(currentMonth + 1).padStart(2, '0')}-${String(i).padStart(2, '0')}`;\r\n        monthlyDataMap[dayKey] = { total: 0, count: 0 };\r\n    }\r\n\r\n    monthlyBills.forEach(b => {\r\n        const d = b.date.split('T')[0];\r\n        if (monthlyDataMap[d]) {\r\n            monthlyDataMap[d].total += b.grandTotal;\r\n            monthlyDataMap[d].count += 1;\r\n        }\r\n    });\r\n\r\n    const monthlyChartData = Object.entries(monthlyDataMap).map(([date, data]) => ({\r\n        date,\r\n        day: parseInt(date.split('-')[2]),\r\n        total: data.total,\r\n        count: data.count\r\n    })).sort((a, b) => a.day - b.day);\r\n\r\n    const monthlyRevenue = monthlyBills.reduce((sum, b) => sum + b.grandTotal, 0);\r\n\r\n    return (\r\n        <div className=\"space-y-6 pb-20\">\r\n            <h2 className=\"text-xl font-bold text-gray-800\">Sales Dashboard</h2>\r\n\r\n            {/* Quick Stats */}\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n                <div className=\"bg-white p-4 rounded-xl shadow-sm border border-gray-100 flex flex-col items-center\">\r\n                    <div className=\"w-10 h-10 bg-green-50 rounded-full flex items-center justify-center mb-2\">\r\n                        <TrendingUp className=\"text-green-600\" size={20} />\r\n                    </div>\r\n                    <span className=\"text-xs text-gray-500 font-medium\">Today's Total</span>\r\n                    <span className=\"text-lg font-bold text-gray-800\">\r\n                        {settings.currencySymbol}{todayRevenue.toFixed(2)}\r\n                    </span>\r\n                </div>\r\n                <div className=\"bg-white p-4 rounded-xl shadow-sm border border-gray-100 flex flex-col items-center\">\r\n                    <div className=\"w-10 h-10 bg-purple-50 rounded-full flex items-center justify-center mb-2\">\r\n                        <TrendingUp className=\"text-purple-600\" size={20} />\r\n                    </div>\r\n                    <span className=\"text-xs text-gray-500 font-medium\">Month Total</span>\r\n                    <span className=\"text-lg font-bold text-gray-800\">\r\n                        {settings.currencySymbol}{monthlyRevenue.toFixed(2)}\r\n                    </span>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Monthly Sales Chart */}\r\n            <div className=\"bg-white p-4 rounded-xl shadow-sm border border-gray-100 h-64\">\r\n                <h3 className=\"text-sm font-semibold text-gray-700 mb-4\">Monthly Sales Trend</h3>\r\n                <ResponsiveContainer width=\"100%\" height=\"80%\">\r\n                    <AreaChart data={monthlyChartData}>\r\n                        <defs>\r\n                            <linearGradient id=\"colorMonthTotal\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\r\n                                <stop offset=\"5%\" stopColor=\"#8b5cf6\" stopOpacity={0.8} />\r\n                                <stop offset=\"95%\" stopColor=\"#8b5cf6\" stopOpacity={0} />\r\n                            </linearGradient>\r\n                        </defs>\r\n                        <CartesianGrid strokeDasharray=\"3 3\" vertical={false} stroke=\"#E5E7EB\" />\r\n                        <XAxis\r\n                            dataKey=\"day\"\r\n                            fontSize={10}\r\n                            tickLine={false}\r\n                            axisLine={false}\r\n                        />\r\n                        <YAxis\r\n                            fontSize={10}\r\n                            tickLine={false}\r\n                            axisLine={false}\r\n                        />\r\n                        <Tooltip\r\n                            contentStyle={{ borderRadius: '8px', border: 'none', boxShadow: '0 4px 6px -1px rgb(0 0 0 / 0.1)' }}\r\n                            formatter={(value: any) => [`${settings.currencySymbol}${Number(value || 0).toFixed(2)}`, 'Sales']}\r\n                            labelFormatter={(label) => `Day ${label}`}\r\n                        />\r\n                        <Area\r\n                            type=\"monotone\"\r\n                            dataKey=\"total\"\r\n                            stroke=\"#8b5cf6\"\r\n                            strokeWidth={2}\r\n                            fillOpacity={1}\r\n                            fill=\"url(#colorMonthTotal)\"\r\n                        />\r\n                    </AreaChart>\r\n                </ResponsiveContainer>\r\n            </div>\r\n\r\n            {/* Day by Day Sales Report */}\r\n            <div className=\"bg-white p-4 rounded-xl shadow-sm border border-gray-100 overflow-hidden\">\r\n                <h3 className=\"text-sm font-semibold text-gray-700 mb-4\">Day by Day Sales Report</h3>\r\n                <div className=\"overflow-x-auto\">\r\n                    <table className=\"w-full text-left text-sm\">\r\n                        <thead className=\"text-xs text-gray-500 uppercase bg-gray-50\">\r\n                            <tr>\r\n                                <th className=\"px-3 py-2\">Date</th>\r\n                                <th className=\"px-3 py-2 text-right\">Bills</th>\r\n                                <th className=\"px-3 py-2 text-right\">Revenue</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody className=\"divide-y divide-gray-100\">\r\n                            {monthlyChartData.slice().reverse().filter(d => d.count > 0).map((row) => (\r\n                                <tr key={row.date} className=\"hover:bg-gray-50 transition-colors\">\r\n                                    <td className=\"px-3 py-2 text-gray-700 font-medium\">\r\n                                        {new Date(row.date).toLocaleDateString([], { day: '2-digit', month: 'short' })}\r\n                                    </td>\r\n                                    <td className=\"px-3 py-2 text-right text-gray-600\">{row.count}</td>\r\n                                    <td className=\"px-3 py-2 text-right text-purple-600 font-bold\">\r\n                                        {settings.currencySymbol}{row.total.toFixed(2)}\r\n                                    </td>\r\n                                </tr>\r\n                            ))}\r\n                            {monthlyBills.length === 0 && (\r\n                                <tr>\r\n                                    <td colSpan={3} className=\"px-3 py-4 text-center text-gray-400 italic\">No sales this month</td>\r\n                                </tr>\r\n                            )}\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Recent Activity Mini-List */}\r\n            <div className=\"bg-white p-4 rounded-xl shadow-sm border border-gray-100\">\r\n                <h3 className=\"text-sm font-semibold text-gray-700 mb-3\">Recent Sales</h3>\r\n                <div className=\"space-y-3\">\r\n                    {bills.slice(0, 5).map(bill => (\r\n                        <div key={bill.id} className=\"flex justify-between items-center text-sm\">\r\n                            <div>\r\n                                <p className=\"font-medium text-gray-800\">{bill.customerName}</p>\r\n                                <p className=\"text-[10px] text-gray-400\">\r\n                                    {new Date(bill.date).toLocaleDateString()} {new Date(bill.date).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}\r\n                                </p>\r\n                            </div>\r\n                            <span className=\"font-bold text-purple-600\">{settings.currencySymbol}{bill.grandTotal.toFixed(2)}</span>\r\n                        </div>\r\n                    ))}\r\n                    {bills.length === 0 && (\r\n                        <p className=\"text-xs text-gray-400 text-center py-2\">No activity recorded yet.</p>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\msck2\\Desktop\\sensor billing\\src\\components\\HistoryList.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\msck2\\Desktop\\sensor billing\\src\\components\\SettingsForm.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\msck2\\Desktop\\sensor billing\\src\\components\\SettingsLock.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'err' is defined but never used.","line":33,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":33,"endColumn":21}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport { useSalonSettings } from '../context/SalonSettingsContext';\r\nimport { hashPassword } from '../utils/crypto';\r\nimport { Lock, Unlock, AlertCircle } from 'lucide-react';\r\n\r\ninterface SettingsLockProps {\r\n    children: React.ReactNode;\r\n}\r\n\r\nexport const SettingsLock: React.FC<SettingsLockProps> = ({ children }) => {\r\n    const { settings, updateSettings } = useSalonSettings();\r\n    const [isLocked, setIsLocked] = useState(!!settings.settingsPassword);\r\n    const [passwordInput, setPasswordInput] = useState('');\r\n    const [error, setError] = useState('');\r\n    const [isChecking, setIsChecking] = useState(false);\r\n\r\n    // Auto-lock feature (Simple implementation: lock on component mount/unmount)\r\n    // For full inactivity, we would need global listeners.\r\n\r\n    const handleUnlock = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        setError('');\r\n        setIsChecking(true);\r\n\r\n        try {\r\n            const hashed = await hashPassword(passwordInput);\r\n            if (hashed === settings.settingsPassword) {\r\n                setIsLocked(false);\r\n                setPasswordInput('');\r\n            } else {\r\n                setError('Incorrect password');\r\n            }\r\n        } catch (err) {\r\n            setError('Encryption error');\r\n        } finally {\r\n            setIsChecking(false);\r\n        }\r\n    };\r\n\r\n    const handleResetPassword = async () => {\r\n        if (confirm('For security, resetting will clear the password protection. Are you sure?')) {\r\n            await updateSettings({ settingsPassword: '' });\r\n            setIsLocked(false);\r\n            // No reload needed now as state updates everything automatically\r\n        }\r\n    };\r\n\r\n    if (!isLocked || !settings.settingsPassword) {\r\n        return <>{children}</>;\r\n    }\r\n\r\n    return (\r\n        <div className=\"flex flex-col items-center justify-center min-h-[60vh] p-6\">\r\n            <div className=\"w-full max-w-sm bg-white rounded-2xl shadow-xl border border-purple-100 p-8 animate-in fade-in zoom-in duration-300\">\r\n                <div className=\"w-20 h-20 bg-purple-50 rounded-full flex items-center justify-center mb-6 mx-auto\">\r\n                    <Lock className=\"text-purple-600\" size={40} />\r\n                </div>\r\n\r\n                <h2 className=\"text-2xl font-bold text-gray-800 mb-2 text-center\">Settings Protected</h2>\r\n                <p className=\"text-gray-500 text-sm text-center mb-8\">\r\n                    Enter your administrator password to modify salon settings and service menu.\r\n                </p>\r\n\r\n                <form onSubmit={handleUnlock} className=\"space-y-4\">\r\n                    <div className=\"relative\">\r\n                        <input\r\n                            type=\"password\"\r\n                            placeholder=\"Type password...\"\r\n                            className={`w-full px-4 py-4 border rounded-xl focus:ring-2 focus:ring-purple-500 focus:outline-none transition-all placeholder:text-gray-300 ${error ? 'border-red-500 ring-1 ring-red-500 bg-red-50' : 'border-gray-200 bg-gray-50'}`}\r\n                            value={passwordInput}\r\n                            onChange={(e) => setPasswordInput(e.target.value)}\r\n                            autoFocus\r\n                        />\r\n                        {error && (\r\n                            <div className=\"flex items-center gap-1 mt-2 text-red-500 text-xs font-medium\">\r\n                                <AlertCircle size={14} />\r\n                                <span>{error}</span>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n\r\n                    <button\r\n                        type=\"submit\"\r\n                        disabled={isChecking}\r\n                        className=\"w-full bg-purple-600 text-white py-4 rounded-xl font-bold hover:bg-purple-700 active:scale-[0.98] transition-all flex items-center justify-center gap-2 shadow-lg shadow-purple-100\"\r\n                    >\r\n                        {isChecking ? 'Verifying...' : (\r\n                            <>\r\n                                <Unlock size={18} />\r\n                                <span>Unlock Access</span>\r\n                            </>\r\n                        )}\r\n                    </button>\r\n\r\n                    <button\r\n                        type=\"button\"\r\n                        onClick={handleResetPassword}\r\n                        className=\"w-full text-gray-400 text-xs hover:text-purple-600 transition-colors py-2\"\r\n                    >\r\n                        Forgot password? <span className=\"underline\">Reset settings protection</span>\r\n                    </button>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\msck2\\Desktop\\sensor billing\\src\\context\\BillHistoryContext.tsx","messages":[],"suppressedMessages":[{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":78,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":78,"endColumn":28,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\msck2\\Desktop\\sensor billing\\src\\context\\SalonSettingsContext.tsx","messages":[],"suppressedMessages":[{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":92,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":92,"endColumn":30,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\msck2\\Desktop\\sensor billing\\src\\electron.d.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":6,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":6,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[109,112],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[109,112],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"export { };\r\n\r\ndeclare global {\r\n    interface Window {\r\n        electron?: {\r\n            printBill: (data: any) => Promise<string>;\r\n        };\r\n    }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\msck2\\Desktop\\sensor billing\\src\\lib\\firebase.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\msck2\\Desktop\\sensor billing\\src\\lib\\firebaseService.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":20,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":20,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[769,772],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[769,772],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":28,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":28,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1062,1065],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1062,1065],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { db } from './firebase';\r\nimport { collection, onSnapshot, query, orderBy, doc, setDoc, deleteDoc } from 'firebase/firestore';\r\nimport type { Bill } from '../context/BillHistoryContext';\r\n\r\nexport const firebaseService = {\r\n    // Bills sync\r\n    subscribeToBills: (callback: (bills: Bill[]) => void) => {\r\n        const q = query(collection(db, 'bills'), orderBy('date', 'desc'));\r\n        return onSnapshot(q, (snapshot) => {\r\n            const bills = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() } as Bill));\r\n            callback(bills);\r\n        });\r\n    },\r\n\r\n    saveBill: async (bill: Bill) => {\r\n        await setDoc(doc(db, 'bills', bill.id), bill);\r\n    },\r\n\r\n    // Predefined Services sync\r\n    subscribeToServices: (callback: (services: any[]) => void) => {\r\n        const q = collection(db, 'services');\r\n        return onSnapshot(q, (snapshot) => {\r\n            const services = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\r\n            callback(services);\r\n        });\r\n    },\r\n\r\n    saveService: async (service: any) => {\r\n        await setDoc(doc(db, 'services', service.id), service);\r\n    },\r\n\r\n    deleteService: async (id: string) => {\r\n        await deleteDoc(doc(db, 'services', id));\r\n    }\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\msck2\\Desktop\\sensor billing\\src\\main.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\msck2\\Desktop\\sensor billing\\src\\utils\\crypto.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]